{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/class/Circle.js","src/class/Equipement.js","src/class/Geometry.js","src/class/Hero.js","src/class/Mob.js","src/class/Point.js","src/class/Sprite.js","src/class/Tile.js","src/class/Vector.js","src/class/client.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","Circle","x","y","radius","_classCallCheck","this","_this","_possibleConstructorReturn","__proto__","Object","getPrototypeOf","classType","line","b","c","d","u1","u2","ret","retP1","retP2","v1","v2","p2","p1","Math","sqrt","isNaN","object","distanceTo","inteceptLineSeg","Equipement","durability","maxDurability","description","emplacement","rarety","level","vitality","strength","intel","wisdom","agility","resistances","earth","fire","nature","wind","water","lightning","arcane","damageBonus","mob","stat","res","bonus","Geometry","round","Hero","game","sprite","_Sprite2","default","addAnimation","position","add","playAnimation","inverse","Mob","life","lifeMax","xp","levelMax","resource","resourceMax","attributPoint","vitalityBase","strengthBase","intelBase","wisdomBase","agilityBase","equipements","head","chest","belt","legs","foot","main_hand","second_hand","ring","neck","back","applyEffects","random","element","dmg","take","absorbtion","avoid","isAlive","respawn","levelUp","amount","isLeveling","slot","equipement","Point","lastPosition","getObject","setLastPosition","p","translate","atan2","dx","dy","p3","strict","b1","b2","b3","signTo","Sprite","url","urlImage","ext","substr","lastIndexOf","content","animations","frames","speed","loop","playing","countFrames","current","iteration","velocity","_Vector2","loadJson","addFrame","maxWidth","maxHeight","minOffsetX","minOffsetY","name","ctx","ready","save","scale","drawImage","img","width","height","offsetX","offsetY","restore","fetch","then","json","keys","frame","w","h","spriteSourceSize","bind","srcX","srcY","srcWidth","srcHeight","Image","onload","src","Tile","pattern","createPattern","fillStyle","fillRect","canvas","Vector","_x","_y","window","_Geometry2","_Point2","_Circle2","_Mob2","_Equipement2","_Hero2","_Tile2","Game","elem","document","createElement","container","getElementById","appendChild","context","getContext","addEventListener","resize","sprites","requestAnimationFrame","gameloop","_createClass","key","value","clearRect","getWidth","getHeight","index","draw","id","clientWidth","clientHeight","getSprite","player","run_animation","rect","getBoundingClientRect","clientX","left","clientY","top"],"mappings":"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","file":"client.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import Point from './Point'; \r\n\r\nexport default class Circle extends Point {\r\n    \r\n    constructor(x,y,radius){\r\n        super(x,y);\r\n        this.radius = radius;\r\n        this.classType = \"Circle\";\r\n    }\r\n        inteceptLineSeg(line) {\r\n        var a, b, c, d, u1, u2, ret, retP1, retP2, v1, v2;\r\n        v1 = {};\r\n        v2 = {};\r\n        v1.x = line.p2.x - line.p1.x;\r\n        v1.y = line.p2.y - line.p1.y;\r\n        v2.x = line.p1.x - this.x;\r\n        v2.y = line.p1.y - this.y;\r\n        b = (v1.x * v2.x + v1.y * v2.y);\r\n        c = 2 * (v1.x * v1.x + v1.y * v1.y);\r\n        b *= -2;\r\n        d = Math.sqrt(b * b - 2 * c * (v2.x * v2.x + v2.y * v2.y - this.radius * this.radius));\r\n        if (isNaN(d)) { // no intercept\r\n            return false;\r\n        }\r\n        u1 = (b - d) / c;  // these represent the unit distance of point one and two on the line\r\n        u2 = (b + d) / c;\r\n        retP1 = {};   // return points\r\n        retP2 = {}\r\n        ret = []; // return array\r\n        if (u1 <= 1 && u1 >= 0) {  // add point if on the line segment\r\n            retP1.x = line.p1.x + v1.x * u1;\r\n            retP1.y = line.p1.y + v1.y * u1;\r\n            ret[0] = retP1;\r\n        }\r\n        if (u2 <= 1 && u2 >= 0) {  // second add point if on the line segment\r\n            retP2.x = line.p1.x + v1.x * u2;\r\n            retP2.y = line.p1.y + v1.y * u2;\r\n            ret[ret.length] = retP2;\r\n        }\r\n        return ret;\r\n    }\r\n    collisionTo(object) {\r\n        if (object.classType == \"Point\") {\r\n            return this.distanceTo(object) <= this.radius + object.radius;\r\n        } else if (object.classType == \"Segment\") {\r\n            return this.inteceptLineSeg(object);\r\n        }\r\n    }\r\n}\r\n","import Mob from './Mob';\r\nexport default class Equipement {\r\n    constructor() {\r\n        this.classType='Equipement';\r\n        this.durability = 100;\r\n        this.maxDurability= 100;\r\n        this.description = 'Casque de zeus';\r\n        this.emplacement = 'head';\r\n        this.rarety = 'epic';\r\n        this.level = '';\r\n        this.vitality = 0;\r\n        this.strength = 0;\r\n        this.intel = 0;\r\n        this.wisdom = 0;\r\n        this.agility = 0;\r\n        this.resistances = {\r\n            earth: 0,\r\n            fire: 0,\r\n            nature: 0,\r\n            wind: 0,\r\n            water: 0,\r\n            lightning: 0,\r\n            arcane: 0\r\n        };\r\n        this.damageBonus = {\r\n            earth: 0,\r\n            fire: 0,\r\n            nature: 0,\r\n            wind: 0,\r\n            water: 0,\r\n            lightning: 0,\r\n            arcane: 0\r\n        };\r\n    }\r\n    /**\r\n     * \r\n     * @param {Mob} mob \r\n     */\r\n    applyEffects(mob) {\r\n        for (let stat in this) {\r\n            switch (stat) {\r\n                case 'vitality':\r\n                case 'strength':\r\n                case 'intel':\r\n                case 'wisdom':\r\n                case 'agility':\r\n\r\n                    mob[stat] += this[stat];\r\n                    break;\r\n\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n        for (var res in this.resistances) {\r\n            mob.resistances[res] += this.resistances[res];\r\n        }\r\n        for (var bonus in this.damageBonus) {\r\n            mob.damageBonus[bonus] += this.damageBonus[bonus];\r\n        }\r\n    }\r\n}","export default class Geometry {\r\n    constructor(){\r\n        \r\n    }\r\n    static round10(n) {\r\n        var round = Math.round(n * 100) / 100;\r\n        if (round <= 0.1 && round >= -0.1) {\r\n            return 0;\r\n        } else {\r\n            return round;\r\n        }\r\n    }\r\n};\r\n","import Mob from './Mob';\r\nimport Sprite from './Sprite';\r\n\r\nexport default class Hero extends Mob {\r\n    constructor(game) {\r\n        super();\r\n        this.sprite = new Sprite('../sprites/hero/hero.json', '../sprites/hero/hero.png');\r\n        this.sprite.addAnimation('death', [0, 1, 2, 3, 4, 5, 6, 7]);\r\n        this.sprite.addAnimation('idle', [8, 9, 10, 11, 12, 13]);\r\n        this.sprite.addAnimation('jump', [14, 15, 16, 17, 18, 19]);\r\n        this.sprite.addAnimation('run', [20, 21, 22, 23, 24, 25, 26, 27]);\r\n        this.sprite.addAnimation('slash', [28, 29, 30, 31, 32, 33]);\r\n        this.sprite.position.y = 745;\r\n        game.add('hero', this.sprite);\r\n    }\r\n    idle_animation() {\r\n        this.sprite.playAnimation('idle', 5, true);\r\n    }\r\n    death_animation() {\r\n        this.sprite.playAnimation('death', 5, false);\r\n    }\r\n    jump_animation() {\r\n        this.sprite.playAnimation('jump', 5, false);\r\n    }\r\n    slash_animation() {\r\n        this.sprite.playAnimation('slash', 5, false);\r\n    }\r\n    run_animation() {\r\n        this.sprite.playAnimation('run', 3, true);\r\n    }\r\n    look_left() {\r\n        this.sprite.inverse = true;\r\n    }\r\n    look_right() {\r\n        this.sprite.inverse = false;\r\n    }\r\n}","import Equipement from './Equipement';\r\nexport default class Mob {\r\n    constructor() {\r\n        this.classType = \"Mob\";\r\n        this.life = 20;\r\n        this.lifeMax = 20;\r\n        this.xp = 0;\r\n        this.level = 1;\r\n        this.levelMax = 100;\r\n        this.resource = 20;\r\n        this.resourceMax = 20;\r\n        this.attributPoint = 0;\r\n        this.vitalityBase = 0;\r\n        this.vitality = 0;\r\n        this.strengthBase = 0;\r\n        this.strength = 0;\r\n        this.intelBase = 0;\r\n        this.intel = 0;\r\n        this.wisdomBase = 0;\r\n        this.wisdom = 0;\r\n        this.agilityBase = 0;\r\n        this.agility = 0;\r\n        this.resistances = {\r\n            earth: 0,\r\n            fire: 0,\r\n            nature: 0,\r\n            wind: 0,\r\n            water: 0,\r\n            lightning: 0,\r\n            arcane: 0\r\n        };\r\n        this.damageBonus = {\r\n            earth: 0,\r\n            fire: 0,\r\n            nature: 0,\r\n            wind: 0,\r\n            water: 0,\r\n            lightning: 0,\r\n            arcane: 0\r\n        };\r\n        this.equipements = {\r\n            head: null,\r\n            chest: null,\r\n            belt: null,\r\n            legs: null,\r\n            foot: null,\r\n            main_hand: null,\r\n            second_hand: null,\r\n            ring: null,\r\n            neck: null,\r\n            back: null,\r\n        }\r\n    }\r\n    \r\n    update() {\r\n        this.vitality = this.vitalityBase;\r\n        this.strength = this.strengthBase;\r\n        this.intel = this.intelBase;\r\n        this.wisdom = this.wisdomBase;\r\n        this.agility = this.agilityBase;\r\n        this.resistances = {\r\n            earth: 0,\r\n            fire: 0,\r\n            nature: 0,\r\n            wind: 0,\r\n            water: 0,\r\n            lightning: 0,\r\n            arcane: 0\r\n        };\r\n        this.damageBonus = {\r\n            earth: 0,\r\n            fire: 0,\r\n            nature: 0,\r\n            wind: 0,\r\n            water: 0,\r\n            lightning: 0,\r\n            arcane: 0\r\n        };\r\n        for (let e in this.equipements) {\r\n            this.equipements[e].applyEffects(this);\r\n        }\r\n    }\r\n    /**\r\n     * \r\n     * @param {Mob} mob \r\n     * @param {string} element \r\n     */\r\n    avoid() {\r\n        let score = this.agility > 120 ? 60 : this.agility * 0.5;\r\n        return score > Math.random() * 100;\r\n    }\r\n    getMinDamage(element) {\r\n        let dmg;\r\n        switch (element) {\r\n            case earth:\r\n                dmg = this.strength;\r\n                break;\r\n            case nature:\r\n                dmg = 0;\r\n                break;\r\n            case wind:\r\n                dmg = 0;\r\n                break;\r\n            case water:\r\n                dmg = this.agility;\r\n                break;\r\n            case lightning:\r\n                dmg = 0;\r\n                break;\r\n            case fire:\r\n                dmg = this.intel;\r\n                break;\r\n            case arcane:\r\n                dmg = this.wisdom * 0.5;\r\n                break;\r\n            default:\r\n                dmg = 1;\r\n                break;\r\n        }\r\n        return dmg *= Math.round(this.damageBonus[element] / 100);\r\n    }\r\n    getMaxDamage(element) {\r\n        let dmg;\r\n        switch (element) {\r\n            case earth:\r\n                dmg = (this.strength + this.level) + this.strength;\r\n                break;\r\n            case nature:\r\n                dmg = (this.strength * 2 + this.level);\r\n                break;\r\n            case wind:\r\n                dmg = (this.agility * 2 + this.level);\r\n                break;\r\n            case water:\r\n                dmg = (this.strength + this.level) + this.agility;\r\n                break;\r\n            case lightning:\r\n                dmg = (this.intel * 2 + this.level);\r\n                break;\r\n            case fire:\r\n                dmg = (this.intel + this.level) + this.intel;\r\n                break;\r\n            case arcane:\r\n                dmg = (this.intel + this.level) + this.wisdom * 0.5;\r\n                break;\r\n            default:\r\n                dmg = 1;\r\n                break;\r\n        }\r\n        return dmg *= Math.round(this.damageBonus[element] / 100);\r\n    }\r\n    /**\r\n     * \r\n     * @param {Mob} mob \r\n     * @param {string} element \r\n     */\r\n    inflict(mob, element) {\r\n        let dmg;\r\n        switch (element) {\r\n            case earth:\r\n                dmg = Math.random() * (this.strength + this.level) + this.strength;\r\n                break;\r\n            case nature:\r\n                dmg = Math.random() * (this.strength * 2 + this.level);\r\n                break;\r\n            case wind:\r\n                dmg = Math.random() * (this.agility * 2 + this.level);\r\n                break;\r\n            case water:\r\n                dmg = Math.random() * (this.strength + this.level) + this.strength;\r\n                break;\r\n            case lightning:\r\n                dmg = Math.random() * (this.intel * 2 + this.level);\r\n                break;\r\n            case fire:\r\n                dmg = Math.random() * (this.intel + this.level) + this.intel;\r\n                break;\r\n            case arcane:\r\n                dmg = Math.random() * (this.intel + this.level) + this.wisdom * 0.5;\r\n                break;\r\n            default:\r\n                dmg = 1;\r\n                break;\r\n        }\r\n        dmg *= this.damageBonus[element] / 100;\r\n        mob.take(Math.round(dmg), element);\r\n    }\r\n    take(dmg, element) {\r\n        let absorbtion = this.resistances[element] / 100;\r\n        //Une ataque arcane ne peut etre évité\r\n        if (element == 'arcane' || !this.avoid()) {\r\n            this.life -= dmg * absorbtion;\r\n            this.isAlive();\r\n        } else {\r\n            //avoid ataque\r\n        }\r\n    }\r\n    isAlive() {\r\n        if (this.life > 0) {\r\n            return true;\r\n        } else {\r\n            this.respawn();\r\n            return false;\r\n        }\r\n    }\r\n    respawn() {\r\n        this.life = this.lifeMax;\r\n    }\r\n    isLeveling() {\r\n        if (this.xp >= this.level * 100) {\r\n            this.levelUp(1);\r\n        }\r\n    }\r\n    levelUp(amount) {\r\n        if (this.level < this.levelMax) {\r\n            this.attributPoint++;\r\n            this.xp -= this.level * 100;\r\n            this.xp = this.xp < 0 ? 0 : this.xp;\r\n            this.level += amount;\r\n            this.isLeveling();\r\n        }\r\n    }\r\n    /**\r\n     * \r\n     * @param {string} slot \r\n     * @param {Equipement} equipement \r\n     */\r\n    setEquipement(slot,equipement){\r\n        if(equipement.classType == 'equipement'){\r\n            this.equipements['slot'] = equipement;\r\n        }\r\n    }\r\n    clearSlot(slot){\r\n        this.equipements['slot'] = null;\r\n    }\r\n};\r\n","import Geometry from './Geometry';\r\nexport default class Point extends Geometry {\r\n    constructor(x, y) {\r\n        super();\r\n        this.x = x || 0;\r\n        this.y = y || 0;\r\n        this.classType = \"Point\";\r\n        this.lastPosition = {\r\n            x: 0,\r\n            y: 0\r\n        }\r\n    }\r\n    getObject() {\r\n        return {\r\n            x: this.x,\r\n            y: this.y\r\n        }\r\n    }\r\n    setLastPosition() {\r\n        this.lastPosition = this.getObject;\r\n    }\r\n    translate(x, y) {\r\n        this.setLastPosition();\r\n        this.x += x;\r\n        this.y += y;\r\n    }\r\n    add(p) {\r\n        this.setLastPosition();\r\n        this.translate(p.x, p.y);\r\n    }\r\n    soustract(p) {\r\n        this.setLastPosition();\r\n        this.translate(- p.x, - p.y);\r\n    }\r\n    divide(p) {\r\n        this.setLastPosition();\r\n        this.x /= p.x;\r\n        this.y /= p.y;\r\n    }\r\n    multiply(p) {\r\n        this.setLastPosition();\r\n        this.x *= p.x;\r\n        this.y *= p.y;\r\n    }\r\n    angleTo(p) {\r\n        return Math.atan2(p.y - this.y, p.x - this.x);\r\n    }\r\n    distanceTo(p) {\r\n        var dx = p.x - this.x,\r\n            dy = p.y - this.y;\r\n        return Math.sqrt(dx * dx + dy * dy);\r\n    }\r\n    signTo(p1, p2) {\r\n        return (this.x - p2.x) * (p1.y - p2.y) - (p1.x - p2.x) * (this.y - p2.y);\r\n    }\r\n    inTriangle(p1, p2, p3, strict) {\r\n        let b1, b2, b3;\r\n        if (strict) {\r\n            b1 = this.signTo(p1, p2) < 0;\r\n            b2 = this.signTo(p2, p3) < 0;\r\n            b3 = this.signTo(p3, p1) < 0;\r\n        } else {\r\n            b1 = this.signTo(p1, p2) <= 0;\r\n            b2 = this.signTo(p2, p3) <= 0;\r\n            b3 = this.signTo(p3, p1) <= 0;\r\n        }\r\n        return ((b1 == b2) && (b2 == b3));\r\n    }\r\n}\r\n","import Vector from './Vector';\r\nexport default class Sprite {\r\n    constructor(url, urlImage) {\r\n        this.ext = url.substr(url.lastIndexOf('.') + 1);\r\n        this.content = {};\r\n        this.animations = {\r\n            \"default\": {\r\n                frames: [0],\r\n                speed: 1,\r\n                loop: false\r\n            }\r\n        };\r\n        this.playing = \"default\";\r\n        this.countFrames = 0;\r\n        this.position = new Point();\r\n        this.current = 0;\r\n        this.iteration = 0;\r\n        this.inverse = false;\r\n        this.velocity = new Vector();\r\n        if (this.ext == 'json') {\r\n            this.loadJson(url, urlImage);\r\n        } else if (url) {\r\n            this.addFrame(url, 0);\r\n        }\r\n        this.maxWidth = 0;\r\n        this.maxHeight = 0;\r\n        this.minOffsetX = null;\r\n        this.minOffsetY = null;\r\n    }\r\n    playAnimation(name, speed, loop) {\r\n        this.iteration = 0;\r\n        this.playing = name;\r\n        this.animations[name].speed = speed || 5;\r\n        this.animations[name].loop = loop || false;\r\n    }\r\n    addAnimation(name, frames) {\r\n        this.animations[name] = {\r\n            speed: 5,\r\n            frames: frames,\r\n            loop: true\r\n        }\r\n    }\r\n    /**\r\n     * \r\n     * @param {CanvasRenderingContext2D} ctx \r\n     */\r\n    draw(ctx) {\r\n        if (this.animations[this.playing] && this.animations[this.playing].speed < this.countFrames) {\r\n\r\n            this.current = this.animations[this.playing].frames[this.iteration];\r\n\r\n            this.iteration++;\r\n            if (this.iteration >= this.animations[this.playing].frames.length) {\r\n\r\n                if (this.animations[this.playing].loop) {\r\n                    this.iteration = 0;\r\n                } else {\r\n                    this.iteration = this.animations[this.playing].frames.length - 1;\r\n                }\r\n            }\r\n\r\n            this.countFrames = 0;\r\n        }\r\n        if (this.content[this.current] && this.content[this.current].ready) {\r\n            ctx.save();\r\n            if (this.inverse) {\r\n                ctx.translate(this.maxWidth / 2, 0);\r\n                ctx.scale(-1, 1);\r\n            }\r\n            if (this.ext == 'json') {\r\n\r\n                ctx.drawImage(\r\n                    this.content[this.current].img,\r\n                    this.content[this.current].x,\r\n                    this.content[this.current].y,\r\n                    this.content[this.current].width,\r\n                    this.content[this.current].height,\r\n                    this.position.x + this.content[this.current].offsetX - this.maxWidth / 2,\r\n                    this.position.y + this.content[this.current].offsetY - (this.maxHeight + 22),\r\n                    this.content[this.current].width,\r\n                    this.content[this.current].height\r\n                );\r\n            }else{\r\n                ctx.drawImage(\r\n                    this.content[this.current].img,\r\n                    this.position.x,\r\n                    this.position.y\r\n                );\r\n            }\r\n\r\n            ctx.restore();\r\n        }\r\n        this.countFrames++;\r\n        this.position.add(this.velocity);\r\n    }\r\n    loadJson(url, urlImage) {\r\n        fetch(url)\r\n            .then(function (res) {\r\n                return res.json();\r\n            })\r\n            .then(function (json) {\r\n                let frames = json.frames;\r\n                for (let i in frames) {\r\n                    this.addFrame(\r\n                        urlImage,\r\n                        Object.keys(this.content).length,\r\n                        frames[i].frame.x,\r\n                        frames[i].frame.y,\r\n                        frames[i].frame.w,\r\n                        frames[i].frame.h,\r\n                        frames[i].spriteSourceSize.x,\r\n                        frames[i].spriteSourceSize.y\r\n                    )\r\n                }\r\n            }.bind(this));\r\n    }\r\n    addFrame(url, position, srcX, srcY, srcWidth, srcHeight, offsetX, offsetY) {\r\n        if (this.maxWidth < srcWidth) {\r\n            this.maxWidth = srcWidth;\r\n        }\r\n        if (this.maxHeight < srcHeight) {\r\n            this.maxHeight = srcHeight;\r\n        }\r\n        if (this.minOffsetX == null || this.minOffsetX > offsetX) {\r\n            this.minOffsetX = offsetX;\r\n        }\r\n        if (this.minOffsetY == null || this.minOffsetY > offsetY) {\r\n            this.minOffsetY = offsetY;\r\n        }\r\n        let img = new Image();\r\n        this.content[position] = {\r\n            url: url,\r\n            ready: false\r\n        };\r\n        img.onload = function () {\r\n            this.content[position].img = img;\r\n            this.content[position].width = srcWidth || img.width;\r\n            this.content[position].height = srcHeight || img.height;\r\n            this.content[position].x = srcX || 0;\r\n            this.content[position].y = srcY || 0;\r\n            this.content[position].offsetX = offsetX || 0;\r\n            this.content[position].offsetY = offsetY || 0;\r\n            this.content[position].ready = true;\r\n\r\n        }.bind(this);\r\n        img.src = url;\r\n    }\r\n}","import Sprite from './Sprite';\r\nexport default class Tile extends Sprite {\r\n    constructor(url, urlImage) {\r\n        super(url, urlImage)\r\n    }\r\n    /**\r\n * \r\n * @param {CanvasRenderingContext2D} ctx \r\n */\r\n    draw(ctx) {\r\n        if (this.animations[this.playing] && this.animations[this.playing].speed < this.countFrames) {\r\n\r\n            this.current = this.animations[this.playing].frames[this.iteration];\r\n\r\n            this.iteration++;\r\n            if (this.iteration >= this.animations[this.playing].frames.length) {\r\n\r\n                if (this.animations[this.playing].loop) {\r\n                    this.iteration = 0;\r\n                } else {\r\n                    this.iteration = this.animations[this.playing].frames.length - 1;\r\n                }\r\n            }\r\n\r\n            this.countFrames = 0;\r\n        }\r\n        if (this.content[this.current] && this.content[this.current].ready) {\r\n            ctx.save();\r\n            if (this.inverse) {\r\n                ctx.translate(this.maxWidth / 2, 0);\r\n                ctx.scale(-1, 1);\r\n            }\r\n            if (this.ext == 'json') {\r\n\r\n                ctx.drawImage(\r\n                    this.content[this.current].img,\r\n                    this.content[this.current].x,\r\n                    this.content[this.current].y,\r\n                    this.content[this.current].width,\r\n                    this.content[this.current].height,\r\n                    this.position.x + this.content[this.current].offsetX - this.maxWidth / 2,\r\n                    this.position.y + this.content[this.current].offsetY - (this.maxHeight + 22),\r\n                    this.content[this.current].width,\r\n                    this.content[this.current].height\r\n                );\r\n            } else {\r\n             \r\n                var pattern = ctx.createPattern(this.content[this.current].img, 'repeat');\r\n                ctx.fillStyle = pattern;\r\n                ctx.translate(this.position.x,this.position.y);\r\n                ctx.fillRect(-this.position.x,-this.position.y,ctx.canvas.width,ctx.canvas.height);\r\n                ctx.translate(-this.position.x, -this.position.y);\r\n\r\n            }\r\n            ctx.restore();\r\n        }\r\n        this.countFrames++;\r\n        this.position.add(this.velocity);\r\n    }\r\n}","import Point from './Point';\r\nexport default class Vector extends Point {\r\n    constructor(x, y) {\r\n        super();\r\n        this._x = 0;\r\n        this._y = 0;\r\n\r\n    }\r\n}","/// <reference path=\"../../node_modules/phaser-ce/typescript/phaser.d.ts\" />\r\nimport Geometry from './Geometry';\r\nimport Point from './Point';\r\nimport Circle from './Circle';\r\nimport Mob from './Mob';\r\nimport Equipement from './Equipement';\r\nimport Hero from './Hero';\r\nimport Sprite from './Sprite';\r\nimport Tile from './Tile';\r\nimport Vector from './Vector';\r\n\r\nwindow.Geometry = Geometry;\r\nwindow.Point = Point;\r\nwindow.Circle = Circle;\r\nwindow.Mob = Mob;\r\nwindow.Equipement = Equipement;\r\nwindow.Hero = Hero;\r\nwindow.Sprite = Sprite;\r\nwindow.Tile = Tile;\r\nwindow.Vector = Vector;\r\n\r\n(function () {\r\n    \"use strict\";\r\n    class Game {\r\n        constructor(elem) {\r\n            this.canvas = document.createElement('canvas');\r\n            this.container = document.getElementById(elem);\r\n            this.container.appendChild(this.canvas);\r\n            this.context = this.canvas.getContext('2d');\r\n            window.addEventListener('resize', this.resize.bind(this));\r\n            this.resize();\r\n            this.sprites = {};\r\n            requestAnimationFrame(this.gameloop.bind(this));\r\n        }\r\n        gameloop() {\r\n            this.context.clearRect(0, 0, this.getWidth(), this.getHeight());\r\n            for (let index in this.sprites) {\r\n                this.sprites[index].draw(this.context);\r\n            }\r\n            requestAnimationFrame(this.gameloop.bind(this));\r\n        }\r\n        add(id, sprite) {\r\n            this.sprites[id] = sprite;\r\n        }\r\n        getSprite(id){\r\n            return this.sprites[id];\r\n        }\r\n        resize() {\r\n            this.canvas.width = this.getWidth();\r\n            this.canvas.height = this.getHeight();\r\n        }\r\n        getWidth() {\r\n            return this.container.clientWidth;\r\n\r\n        }\r\n        getHeight() {\r\n            return this.container.clientHeight;\r\n        }\r\n        getCenter() {\r\n            return {\r\n                x: this.getWidth() / 2,\r\n                y: this.this.getHeight() / 2,\r\n            }\r\n        }\r\n    }\r\n    var game = new Game('game-canvas');\r\n    \r\n    for (var i = 11; i > 1; i--) {\r\n        game.add('bg' + i, new Tile('../images/background/' + i + '.png'));\r\n        game.getSprite('bg'+i).velocity.x = - 2 + i/15;\r\n    }\r\n    var player = new Hero(game);\r\n    player.run_animation();\r\n    \r\n    game.add('bg1', new Tile('../images/background/1.png'));\r\n    game.getSprite('bg1').velocity.x = -2;\r\n    window.addEventListener('keydown', function (e) {\r\n\r\n    });\r\n    window.addEventListener('keyup', function (e) {\r\n\r\n    });\r\n    game.canvas.addEventListener('mousemove',function(e){\r\n        var rect = game.canvas.getBoundingClientRect();\r\n        player.sprite.position.x = e.clientX - rect.left;\r\n        player.sprite.position.y = e.clientY - rect.top;\r\n    })\r\n    // setTimeout(function () {\r\n    //     player.death_animation();\r\n    //     player.look_right();\r\n    // }, 5000)\r\n})();"]}