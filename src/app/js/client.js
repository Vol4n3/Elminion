!function t(e,i,n){function s(a,o){if(!i[a]){if(!e[a]){var u="function"==typeof require&&require;if(!o&&u)return u(a,!0);if(r)return r(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var l=i[a]={exports:{}};e[a][0].call(l.exports,function(t){var i=e[a][1][t];return s(i||t)},l,l.exports,t,e,i,n)}return i[a].exports}for(var r="function"==typeof require&&require,a=0;a<n.length;a++)s(n[a]);return s}({1:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(t){return t&&t.__esModule?t:{default:t}}(t("./Point")),u=function(t){function e(t,i,r){n(this,e);var a=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return a.radius=r,a.classType="Circle",a}return r(e,o.default),a(e,[{key:"inteceptLineSeg",value:function(t){var e,i,n,s,r,a,o,u,h,l;return h={},l={},h.x=t.p2.x-t.p1.x,h.y=t.p2.y-t.p1.y,l.x=t.p1.x-this.x,l.y=t.p1.y-this.y,e=h.x*l.x+h.y*l.y,i=2*(h.x*h.x+h.y*h.y),e*=-2,n=Math.sqrt(e*e-2*i*(l.x*l.x+l.y*l.y-this.radius*this.radius)),!isNaN(n)&&(s=(e-n)/i,r=(e+n)/i,o={},u={},a=[],s<=1&&s>=0&&(o.x=t.p1.x+h.x*s,o.y=t.p1.y+h.y*s,a[0]=o),r<=1&&r>=0&&(u.x=t.p1.x+h.x*r,u.y=t.p1.y+h.y*r,a[a.length]=u),a)}},{key:"collisionTo",value:function(t){return"Point"==t.classType?this.distanceTo(t)<=this.radius+t.radius:"Segment"==t.classType?this.inteceptLineSeg(t):void 0}}]),e}();i.default=u},{"./Point":6}],2:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=(function(t){t&&t.__esModule}(t("./Mob")),function(){function t(){n(this,t),this.classType="Equipement",this.durability=100,this.maxDurability=100,this.description="Casque de zeus",this.emplacement="head",this.rarety="epic",this.level="",this.vitality=0,this.strength=0,this.intel=0,this.wisdom=0,this.agility=0,this.resistances={earth:0,fire:0,nature:0,wind:0,water:0,lightning:0,arcane:0},this.damageBonus={earth:0,fire:0,nature:0,wind:0,water:0,lightning:0,arcane:0}}return s(t,[{key:"applyEffects",value:function(t){for(var e in this)switch(e){case"vitality":case"strength":case"intel":case"wisdom":case"agility":t[e]+=this[e]}for(var i in this.resistances)t.resistances[i]+=this.resistances[i];for(var n in this.damageBonus)t.damageBonus[n]+=this.damageBonus[n]}}]),t}());i.default=r},{"./Mob":5}],3:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(){n(this,t)}return s(t,null,[{key:"round10",value:function(t){var e=Math.round(100*t)/100;return e<=.1&&e>=-.1?0:e}}]),t}();i.default=r},{}],4:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=n(t("./Mob")),h=n(t("./Sprite")),l=function(t){function e(t){s(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.sprite=new h.default("../sprites/hero/hero.json","../sprites/hero/hero.png"),i.sprite.addAnimation("death",[0,1,2,3,4,5,6,7]),i.sprite.addAnimation("idle",[8,9,10,11,12,13]),i.sprite.addAnimation("jump",[14,15,16,17,18,19]),i.sprite.addAnimation("run",[20,21,22,23,24,25,26,27]),i.sprite.addAnimation("slash",[28,29,30,31,32,33]),i.sprite.position.y=745,t.add("hero",i.sprite),i}return a(e,u.default),o(e,[{key:"idle_animation",value:function(){this.sprite.playAnimation("idle",5,!0)}},{key:"death_animation",value:function(){this.sprite.playAnimation("death",5,!1)}},{key:"jump_animation",value:function(){this.sprite.playAnimation("jump",5,!1)}},{key:"slash_animation",value:function(){this.sprite.playAnimation("slash",5,!1)}},{key:"run_animation",value:function(){this.sprite.playAnimation("run",3,!0)}},{key:"look_left",value:function(){this.sprite.inverse=!0}},{key:"look_right",value:function(){this.sprite.inverse=!1}}]),e}();i.default=l},{"./Mob":5,"./Sprite":7}],5:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=(function(t){t&&t.__esModule}(t("./Equipement")),function(){function t(){n(this,t),this.classType="Mob",this.life=20,this.lifeMax=20,this.xp=0,this.level=1,this.levelMax=100,this.resource=20,this.resourceMax=20,this.attributPoint=0,this.vitalityBase=0,this.vitality=0,this.strengthBase=0,this.strength=0,this.intelBase=0,this.intel=0,this.wisdomBase=0,this.wisdom=0,this.agilityBase=0,this.agility=0,this.resistances={earth:0,fire:0,nature:0,wind:0,water:0,lightning:0,arcane:0},this.damageBonus={earth:0,fire:0,nature:0,wind:0,water:0,lightning:0,arcane:0},this.equipements={head:null,chest:null,belt:null,legs:null,foot:null,main_hand:null,second_hand:null,ring:null,neck:null,back:null}}return s(t,[{key:"update",value:function(){this.vitality=this.vitalityBase,this.strength=this.strengthBase,this.intel=this.intelBase,this.wisdom=this.wisdomBase,this.agility=this.agilityBase,this.resistances={earth:0,fire:0,nature:0,wind:0,water:0,lightning:0,arcane:0},this.damageBonus={earth:0,fire:0,nature:0,wind:0,water:0,lightning:0,arcane:0};for(var t in this.equipements)this.equipements[t].applyEffects(this)}},{key:"avoid",value:function(){return(this.agility>120?60:.5*this.agility)>100*Math.random()}},{key:"getMinDamage",value:function(t){var e=void 0;switch(t){case earth:e=this.strength;break;case nature:case wind:e=0;break;case water:e=this.agility;break;case lightning:e=0;break;case fire:e=this.intel;break;case arcane:e=.5*this.wisdom;break;default:e=1}return e*=Math.round(this.damageBonus[t]/100)}},{key:"getMaxDamage",value:function(t){var e=void 0;switch(t){case earth:e=this.strength+this.level+this.strength;break;case nature:e=2*this.strength+this.level;break;case wind:e=2*this.agility+this.level;break;case water:e=this.strength+this.level+this.agility;break;case lightning:e=2*this.intel+this.level;break;case fire:e=this.intel+this.level+this.intel;break;case arcane:e=this.intel+this.level+.5*this.wisdom;break;default:e=1}return e*=Math.round(this.damageBonus[t]/100)}},{key:"inflict",value:function(t,e){var i=void 0;switch(e){case earth:i=Math.random()*(this.strength+this.level)+this.strength;break;case nature:i=Math.random()*(2*this.strength+this.level);break;case wind:i=Math.random()*(2*this.agility+this.level);break;case water:i=Math.random()*(this.strength+this.level)+this.strength;break;case lightning:i=Math.random()*(2*this.intel+this.level);break;case fire:i=Math.random()*(this.intel+this.level)+this.intel;break;case arcane:i=Math.random()*(this.intel+this.level)+.5*this.wisdom;break;default:i=1}i*=this.damageBonus[e]/100,t.take(Math.round(i),e)}},{key:"take",value:function(t,e){var i=this.resistances[e]/100;"arcane"!=e&&this.avoid()||(this.life-=t*i,this.isAlive())}},{key:"isAlive",value:function(){return this.life>0||(this.respawn(),!1)}},{key:"respawn",value:function(){this.life=this.lifeMax}},{key:"isLeveling",value:function(){this.xp>=100*this.level&&this.levelUp(1)}},{key:"levelUp",value:function(t){this.level<this.levelMax&&(this.attributPoint++,this.xp-=100*this.level,this.xp=this.xp<0?0:this.xp,this.level+=t,this.isLeveling())}},{key:"setEquipement",value:function(t,e){"equipement"==e.classType&&(this.equipements.slot=e)}},{key:"clearSlot",value:function(t){this.equipements.slot=null}}]),t}());i.default=r},{"./Equipement":2}],6:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(t){return t&&t.__esModule?t:{default:t}}(t("./Geometry")),u=function(t){function e(t,i){n(this,e);var r=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.x=t||0,r.y=i||0,r.classType="Point",r.lastPosition={x:0,y:0},r}return r(e,o.default),a(e,[{key:"getObject",value:function(){return{x:this.x,y:this.y}}},{key:"setLastPosition",value:function(){this.lastPosition=this.getObject}},{key:"translate",value:function(t,e){this.setLastPosition(),this.x+=t,this.y+=e}},{key:"add",value:function(t){this.setLastPosition(),this.translate(t.x,t.y)}},{key:"soustract",value:function(t){this.setLastPosition(),this.translate(-t.x,-t.y)}},{key:"divide",value:function(t){this.setLastPosition(),this.x/=t.x,this.y/=t.y}},{key:"multiply",value:function(t){this.setLastPosition(),this.x*=t.x,this.y*=t.y}},{key:"angleTo",value:function(t){return Math.atan2(t.y-this.y,t.x-this.x)}},{key:"distanceTo",value:function(t){var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)}},{key:"signTo",value:function(t,e){return(this.x-e.x)*(t.y-e.y)-(t.x-e.x)*(this.y-e.y)}},{key:"inTriangle",value:function(t,e,i,n){var s=void 0,r=void 0,a=void 0;return n?(s=this.signTo(t,e)<0,r=this.signTo(e,i)<0,a=this.signTo(i,t)<0):(s=this.signTo(t,e)<=0,r=this.signTo(e,i)<=0,a=this.signTo(i,t)<=0),s==r&&r==a}}]),e}();i.default=u},{"./Geometry":3}],7:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){return t&&t.__esModule?t:{default:t}}(t("./Vector")),a=function(){function t(e,i){n(this,t),this.ext=e.substr(e.lastIndexOf(".")+1),this.content={},this.animations={default:{frames:[0],speed:1,loop:!1}},this.playing="default",this.countFrames=0,this.position=new Point,this.current=0,this.iteration=0,this.inverse=!1,this.velocity=new r.default,"json"==this.ext?this.loadJson(e,i):e&&this.addFrame(e,0),this.maxWidth=0,this.maxHeight=0,this.minOffsetX=null,this.minOffsetY=null}return s(t,[{key:"playAnimation",value:function(t,e,i){this.iteration=0,this.playing=t,this.animations[t].speed=e||5,this.animations[t].loop=i||!1}},{key:"addAnimation",value:function(t,e){this.animations[t]={speed:5,frames:e,loop:!0}}},{key:"draw",value:function(t){this.animations[this.playing]&&this.animations[this.playing].speed<this.countFrames&&(this.current=this.animations[this.playing].frames[this.iteration],++this.iteration>=this.animations[this.playing].frames.length&&(this.animations[this.playing].loop?this.iteration=0:this.iteration=this.animations[this.playing].frames.length-1),this.countFrames=0),this.content[this.current]&&this.content[this.current].ready&&(t.save(),this.inverse&&(t.translate(this.maxWidth/2,0),t.scale(-1,1)),"json"==this.ext?t.drawImage(this.content[this.current].img,this.content[this.current].x,this.content[this.current].y,this.content[this.current].width,this.content[this.current].height,this.position.x+this.content[this.current].offsetX-this.maxWidth/2,this.position.y+this.content[this.current].offsetY-(this.maxHeight+22),this.content[this.current].width,this.content[this.current].height):t.drawImage(this.content[this.current].img,this.position.x,this.position.y),t.restore()),this.countFrames++,this.position.add(this.velocity)}},{key:"loadJson",value:function(t,e){fetch(t).then(function(t){return t.json()}).then(function(t){var i=t.frames;for(var n in i)this.addFrame(e,Object.keys(this.content).length,i[n].frame.x,i[n].frame.y,i[n].frame.w,i[n].frame.h,i[n].spriteSourceSize.x,i[n].spriteSourceSize.y)}.bind(this))}},{key:"addFrame",value:function(t,e,i,n,s,r,a,o){this.maxWidth<s&&(this.maxWidth=s),this.maxHeight<r&&(this.maxHeight=r),(null==this.minOffsetX||this.minOffsetX>a)&&(this.minOffsetX=a),(null==this.minOffsetY||this.minOffsetY>o)&&(this.minOffsetY=o);var u=new Image;this.content[e]={url:t,ready:!1},u.onload=function(){this.content[e].img=u,this.content[e].width=s||u.width,this.content[e].height=r||u.height,this.content[e].x=i||0,this.content[e].y=n||0,this.content[e].offsetX=a||0,this.content[e].offsetY=o||0,this.content[e].ready=!0}.bind(this),u.src=t}}]),t}();i.default=a},{"./Vector":9}],8:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(t){return t&&t.__esModule?t:{default:t}}(t("./Sprite")),u=function(t){function e(t,i){return n(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i))}return r(e,o.default),a(e,[{key:"draw",value:function(t){if(this.animations[this.playing]&&this.animations[this.playing].speed<this.countFrames&&(this.current=this.animations[this.playing].frames[this.iteration],++this.iteration>=this.animations[this.playing].frames.length&&(this.animations[this.playing].loop?this.iteration=0:this.iteration=this.animations[this.playing].frames.length-1),this.countFrames=0),this.content[this.current]&&this.content[this.current].ready){if(t.save(),this.inverse&&(t.translate(this.maxWidth/2,0),t.scale(-1,1)),"json"==this.ext)t.drawImage(this.content[this.current].img,this.content[this.current].x,this.content[this.current].y,this.content[this.current].width,this.content[this.current].height,this.position.x+this.content[this.current].offsetX-this.maxWidth/2,this.position.y+this.content[this.current].offsetY-(this.maxHeight+22),this.content[this.current].width,this.content[this.current].height);else{var e=t.createPattern(this.content[this.current].img,"repeat");t.fillStyle=e,t.translate(this.position.x,this.position.y),t.fillRect(-this.position.x,-this.position.y,t.canvas.width,t.canvas.height),t.translate(-this.position.x,-this.position.y)}t.restore()}this.countFrames++,this.position.add(this.velocity)}}]),e}();i.default=u},{"./Sprite":7}],9:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var a=function(t){return t&&t.__esModule?t:{default:t}}(t("./Point")),o=function(t){function e(t,i){n(this,e);var r=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r._x=0,r._y=0,r}return r(e,a.default),e}();i.default=o},{"./Point":6}],10:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=n(t("./Geometry")),o=n(t("./Point")),u=n(t("./Circle")),h=n(t("./Mob")),l=n(t("./Equipement")),c=n(t("./Hero")),f=n(t("./Sprite")),p=n(t("./Tile")),d=n(t("./Vector"));window.Geometry=a.default,window.Point=o.default,window.Circle=u.default,window.Mob=h.default,window.Equipement=l.default,window.Hero=c.default,window.Sprite=f.default,window.Tile=p.default,window.Vector=d.default,function(){for(var t=new(function(){function t(e){s(this,t),this.canvas=document.createElement("canvas"),this.container=document.getElementById(e),this.container.appendChild(this.canvas),this.context=this.canvas.getContext("2d"),window.addEventListener("resize",this.resize.bind(this)),this.resize(),this.sprites={},requestAnimationFrame(this.gameloop.bind(this))}return r(t,[{key:"gameloop",value:function(){this.context.clearRect(0,0,this.getWidth(),this.getHeight());for(var t in this.sprites)this.sprites[t].draw(this.context);requestAnimationFrame(this.gameloop.bind(this))}},{key:"add",value:function(t,e){this.sprites[t]=e}},{key:"getSprite",value:function(t){return this.sprites[t]}},{key:"resize",value:function(){this.canvas.width=this.getWidth(),this.canvas.height=this.getHeight()}},{key:"getWidth",value:function(){return this.container.clientWidth}},{key:"getHeight",value:function(){return this.container.clientHeight}},{key:"getCenter",value:function(){return{x:this.getWidth()/2,y:this.this.getHeight()/2}}}]),t}())("game-canvas"),e=11;e>1;e--)t.add("bg"+e,new p.default("../images/background/"+e+".png")),t.getSprite("bg"+e).velocity.x=e/15-2;var i=new c.default(t);i.run_animation(),t.add("bg1",new p.default("../images/background/1.png")),t.getSprite("bg1").velocity.x=-2,window.addEventListener("keydown",function(t){}),window.addEventListener("keyup",function(t){}),t.canvas.addEventListener("mousemove",function(e){var n=t.canvas.getBoundingClientRect();i.sprite.position.x=e.clientX-n.left,i.sprite.position.y=e.clientY-n.top})}()},{"./Circle":1,"./Equipement":2,"./Geometry":3,"./Hero":4,"./Mob":5,"./Point":6,"./Sprite":7,"./Tile":8,"./Vector":9}]},{},[10]);
//# sourceMappingURL=client.js.map
